# Git å¿«é€Ÿæ“ä½œ - PowerShell é…ç½®
# 
# å®‰è£…æ­¥éª¤ï¼š
# 1. æ‰“å¼€ PowerShellï¼Œè¿è¡Œï¼šnotepad $PROFILE
# 2. å°†ä¸‹é¢çš„å†…å®¹å¤åˆ¶åˆ°é…ç½®æ–‡ä»¶ä¸­
# 3. ä¿å­˜å¹¶é‡å¯ PowerShell
# 4. å¦‚æœé‡åˆ°æ‰§è¡Œç­–ç•¥é”™è¯¯ï¼Œè¿è¡Œï¼šSet-ExecutionPolicy RemoteSigned -Scope CurrentUser

# ============== å¤åˆ¶ä¸‹é¢çš„å†…å®¹åˆ° $PROFILE ==============

# Git å¿«æ·åˆ«å
Set-Alias -Name gs -Value Get-GitStatus
Set-Alias -Name gp -Value Invoke-GitPush

function Get-GitStatus {
    git status
}

function Invoke-GitPush {
    param([string]$message = "æ›´æ–°å†…å®¹")
    Write-Host "ğŸ“ æ·»åŠ æ–‡ä»¶..." -ForegroundColor Cyan
    git add .
    
    Write-Host "ğŸ’¾ æäº¤æ›´æ”¹: $message" -ForegroundColor Cyan
    git commit -m $message
    
    Write-Host "ğŸš€ æ¨é€åˆ°è¿œç¨‹..." -ForegroundColor Cyan
    git push
    
    if ($LASTEXITCODE -eq 0) {
        Write-Host "âœ… æˆåŠŸæ¨é€!" -ForegroundColor Green
    } else {
        Write-Host "âŒ æ¨é€å¤±è´¥" -ForegroundColor Red
    }
}

function Invoke-GitSync {
    Write-Host "ğŸ”„ åŒæ­¥è¿œç¨‹æ›´æ”¹..." -ForegroundColor Cyan
    git pull --rebase
    if ($LASTEXITCODE -eq 0) {
        Write-Host "ğŸš€ æ¨é€æœ¬åœ°æ›´æ”¹..." -ForegroundColor Cyan
        git push
    }
}

function Undo-GitCommit {
    Write-Host "â†©ï¸  æ’¤é”€æœ€åä¸€æ¬¡æäº¤ï¼ˆä¿ç•™æ›´æ”¹ï¼‰..." -ForegroundColor Yellow
    git reset --soft HEAD~1
}

function Show-GitLog {
    git log --oneline --graph --decorate --all -10
}

# ä½¿ç”¨è¯´æ˜
Write-Host "ğŸ‰ Git å¿«æ·å‘½ä»¤å·²åŠ è½½ï¼" -ForegroundColor Green
Write-Host "  gp 'æäº¤ä¿¡æ¯'  - å¿«é€Ÿæäº¤å¹¶æ¨é€" -ForegroundColor Cyan
Write-Host "  gs            - æŸ¥çœ‹çŠ¶æ€" -ForegroundColor Cyan
